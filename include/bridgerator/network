#include<iostream>
#include<sys/epoll.h>
#include<netinet/in.h>

class listener {
private:
	int                _socket;
	struct sockaddr_in _addr;

	std::string        _remote_address;
	unsigned short     _remote_port;
public:
	listener(unsigned short local_port, std::string remote_address,
	  unsigned short remote_port);
	int start();
	int do_accept(struct sockaddr_in *client);
};

class forwarder;

class client {
private:
	int _socket;
	forwarder *_forwarder;
public:
	client(int socket);
	bool read_and_forward();
	forwarder *forwarder();
};

class forwarder {
private:
	int _socket;
public:
	forwarder(int socket);
	int socket();

};

